<div class="modal-header">
  <h5 class="modal-title">Add Project Member</h5>
  <button
    type="button"
    class="btn-close"
    (click)="selfBsModalRef.hide()"
  ></button>
</div>
<div class="modal-body">
  <app-reactive-input
    [formControl]="searchMember"
    [formFloating]="false"
    [placeholder]="'e.g. email@gmail.com...'"
    [validatorsKeyValue]="[{ key: 'required', value: 'Field is required.' }]"
    [label]="'Email'"
  >
  </app-reactive-input>
  <ng-container *ngIf="searchedMember$ | async as searchedMember">
    <div
      *ngIf="searchedMember.length > 0"
      class="mt-3 overflow-auto bg-secondary-subtle border border-1 rounded rounded-3"
      style="max-height: 200px"
    >
      <div
        role="button"
        *ngFor="let searchUser of searchedMember"
        class="user-card"
      >
        <div class="d-flex flex-row justify-content-start">
          <div class="p-1 me-2" style="width: 40px; height: 40px">
            <img
              [src]="
                searchUser?.photoUrl ?? 'assets/images/Sample_User_Icon.png'
              "
              class="img-fluid rounded-circle border border-1"
              alt="..."
            />
          </div>
          <div class="flex-grow-1 d-flex align-items-center overflow-hidden">
            <div class="text-truncate">{{ searchUser.email }}</div>
          </div>

          <div class="d-flex me-2 align-items-center">
            <ng-container [ngSwitch]="searchUser.status">
              <ng-container *ngSwitchCase="memberStatusTypes.Uninvited">
                <ng-container *ngTemplateOutlet="uninvited"></ng-container>
              </ng-container>
              <ng-container *ngSwitchCase="memberStatusTypes.Invited">
                <ng-container *ngTemplateOutlet="invited"></ng-container>
              </ng-container>
              <ng-container *ngSwitchCase="memberStatusTypes.Member">
                <ng-container *ngTemplateOutlet="member"></ng-container>
              </ng-container>
            </ng-container>
          </div>

          <ng-template #uninvited>
            <button
              (click)="sendInvitation(searchUser)"
              type="button"
              class="btn btn-outline-success btn-sm"
              container="body"
              tooltip="Add member"
            >
              <i class="bi bi-person-plus-fill"></i>
            </button>
          </ng-template>
          <ng-template #invited>
            <div
              class="spinner-border spinner-border-sm"
              role="status"
              container="body"
              tooltip="Waiting for confirmation."
            >
              <span class="visually-hidden">Loading...</span>
            </div>
          </ng-template>
          <ng-template #member>
            <!-- <button type="text" class="btn btn-outline-success btn-sm" container="body" tooltip="Member" > -->
              <i class="bi bi-person-fill-check"></i>
            <!-- </button> -->
          </ng-template>
        </div>
      </div>
    </div>
  </ng-container>
</div>
