<!-- 
    <div *ngFor="let message of (chatService.messageThread$ | async); let i = index;" 
    [ngClass]="message.senderEmail !== currentRecipientEmail ? 'align-self-end me' : 'align-self-start him'"
    [class.start]="(chatService.messageThread$ | async)?.[i-1]?.senderEmail===message.senderEmail ? false : true"
    [class.end]="(chatService.messageThread$ | async)?.[i+1]?.senderEmail===message.senderEmail ?false: true "
    class="w-75 mb-1 "
    [class.last-read]="indexOfLastDisplayed===i"
    #messages
    > -->
<!-- <div class="message" 
    class="w-75 mb-1 "
    [ngClass]="isMyMessage ? 'align-self-end me' : 'align-self-start him'"
    [class.start]="isStartMessage"
    [class.end]="isEndMessage"
    [class.last-read]="islastRead"
     > 
        <div class="d-flex flex-row justify-content-start align-items-end" *ngIf="message.senderEmail === currentRecipientEmail; else textOnTheRight">
            <img class=" border border-1 rounded-circle me-2" src="{{message.senderPhotoUrl || './assets/user.png'}}" alt="image of user" style="max-height: 28px;"
            [tooltip]="message.senderEmail"
            placement="bottom"
            >
            <div class="border p-2 speech-bubble bg-secondary"
            [tooltip]="(message.messageSent | date:'EEEE, MM d, y, HH:mm:ss zzzz')?? 'lack of data' "
            placement="right"
            > 
                <span style="font-size: 20px;">
                    {{message.content}}
                </span>
            </div>
        </div>
        <ng-template #textOnTheRight>
            <div class="d-flex flex-row justify-content-end align-items-end">
                
                <div class="border p-2 speech-bubble bg-primary"
                [tooltip]="(message.messageSent | date:'short')?? 'lack of data' "
                placement="left"
                > 
                    <span  style="font-size: 20px;">
                        {{message.content}}
                    </span>
                </div>
                <ng-template [ngIf]="!message.dateRead && message.senderEmail !== currentRecipientEmail" [ngIfElse]="loggedOut">
                <div>
                    <div style="position: relative; width: 1.5rem;" >
                        <i  class="fa-solid fa-eye-slash me-2 ms-1 fa-2xs"
                        tooltip="unread"
                        placement="left"
                        style="position: absolute; bottom: 0.2rem;"
                        ></i>
                    </div>
                </div>
                </ng-template>
                <ng-template #loggedOut>
                <div>
                    <div style="position: relative; width: 1.5rem; " >
                        <i  class="fa-solid fa-eye me-2 ms-1 fa-2xs "
                        style="position: absolute;"
                        tooltip="read {{message.dateRead | date:'short'}}"
                        placement="left"
                        style="position: absolute; bottom: 0.2rem;"
                        ></i>
                    </div>
                </div>
                </ng-template>
            </div>
        </ng-template> -->
<!-- </div> -->
<!-- class="w-75 mb-1" -->

<!-- w-75 -->
<ng-container *ngIf="message && currentRecipientEmail">
  <div
   class=" mb-1 text-break w-75" 
   [ngClass]="isMyMessage ? 'ms-auto me' : 'me-auto him'"
   [class.start]="isStartMessage"
   [class.end]="isEndMessage"
   [class.last-read]="isLastRead"
  >
    <div
      class="d-flex flex-row justify-content-start align-items-end"
      *ngIf="message.senderEmail === currentRecipientEmail; else myMessage"
    >
      <img
        class="border border-1 rounded-circle me-2"
        src="{{ message.senderPhotoUrl || './assets/user.png' }}"
        alt="image of user"
        style="max-height: 28px"
        [tooltip]="message.senderEmail"
        placement="bottom"
      />
      <div
        class="border p-2 speech-bubble bg-secondary"
        [tooltip]="
          (message.messageSent | date : 'EEEE, MM d, y, HH:mm:ss zzzz') ??
          'lack of data'
        "
        placement="right"
      >
        <span style="font-size: 20px">
          {{ message.content }}
        </span>
      </div>
    </div>
    <ng-template #myMessage>
      <div class="d-flex flex-row justify-content-end align-items-end">
        <div
          class="border p-2 speech-bubble bg-primary"
          [tooltip]="(message.messageSent | date : 'short') ?? 'lack of data'"
          placement="left"
        >
          <span style="font-size: 20px">
            {{ message.content }}
          </span>
        </div>
        <ng-template
          [ngIf]="
            !message.dateRead && message.senderEmail !== currentRecipientEmail
          "
          [ngIfElse]="loggedOut"
        >
          <div>
            <div style="position: relative; width: 1.5rem">
              <i
                class="fa-solid fa-eye-slash me-2 ms-1 fa-2xs"
                tooltip="unread"
                placement="left"
                style="position: absolute; bottom: 0.2rem"
              ></i>
            </div>
          </div>
        </ng-template>
        <ng-template #loggedOut>
          <div>
            <div style="position: relative; width: 1.5rem">
              <i
                class="fa-solid fa-eye me-2 ms-1 fa-2xs"
                style="position: absolute"
                tooltip="read {{ message.dateRead | date : 'short' }}"
                placement="left"
                style="position: absolute; bottom: 0.2rem"
              ></i>
            </div>
          </div>
        </ng-template>
      </div>
    </ng-template>
  </div>
</ng-container>
